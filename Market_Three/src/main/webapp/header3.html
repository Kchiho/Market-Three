<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
	integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
	crossorigin="anonymous"></script>
<link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
<!-- Bootstrap icons-->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
	rel="stylesheet" />
<!-- Font -->
<link rel="
	preconnect" href="https://fonts.gstatic.com/" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap"
	rel="stylesheet">

<!-- Core theme CSS (includes Bootstrap)-->
<link href="startbootstrap-shop-homepage-gh-pages/css/styles.css"
	rel="stylesheet" />

<style type="text/css">
div > a{
	color: rgb(95, 0, 128);
}
.jua {
	font-family: 'Jua';
}

.navbar {
	position: fiexd;
	top: 0;
}

#logo {
	width: auto;
	height: 150px;
	background-color: white;
	text-align: center;
	min-width: 500px;
}

#main {
	width: 150px;
	height: 150px;
}

.lj {
	margin-right: 10px;
	color: rgb(95, 0, 128);
}

.hmenu {
	width: auto;
	max-width: 1100px;
	min-width: 600px;
	margin: auto;
	height: 50px;
	color: rgb(95, 0, 128);
}

.hflex-container {
	display: flex;
	height: 50px;
	align-items: center;
	height: 50px;
	justify-content: space-between;
	border-bottom: 3px double rgb(95, 0, 128);
	margin-bottom: 5px;
}

.hflex-item {
	flex-basis: auto;
	height: 40px;
	text-align: center;
	line-height: 40px;
	min-width: 200px;
}

#hcategorimenu {
	margin: 0;
	padding: 0;
	list-style-type: none;
	display: none;
	position: absolute;
	z-index: 1000;
	background-color: white;
	min-width: 200px;
	border-top: 1px solid black;
	margin-top: 6px;
}

#hcategorimain:hover {
	cursor: pointer;
	font-weight: bold;
}

#hcategorimenu>li {
	border-bottom: 1px solid black;
}

a:link {
	color: black;
	text-decoration: none;
}

.hitl .hitr {
	min-width: 150px;
}

.hitc {
	width: 250px;
	min-width: 100px;
	display: inline-block;
}
#ljbox{
	height: 20px;
}
#ht{
	color: rgb(95, 0, 128);
}
#rhb:hover{
	background-color: rgb(95, 0, 128);
}

@media ( max-width : 900px) {
	.hitc {
		display: none;
		width: 100px;
	}
}
</style>

</head>
<body>
	<script>
		$(document).ready(function() {
			$("#hcategorimain").click(function() {
				$("#hcategorimenu").slideToggle();
			});
		});
	</script>
	<!-- 네이게이션바 -->
	<nav class="navbar navbar-expand-lg navbar-light bg-light ">
		<div class="container px-4 px-lg-5 jua">
			<a class="navbar-brand" id="ht" href="MTmain.html">Market Three</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="MTmain.html">Home</a></li>
					<li class="nav-item"><a class="nav-link"
						href="https://github.com/Kchiho/Market-Three.git" target="_blank">About</a></li>
				</ul>
				<div class="lj">
					<a href="login.html">Login</a>
				</div>
				<div id="ljbox"></div>
				<div class="lj">
					<a href="join.html">Join</a>
				</div>
				<form class="d-flex" action="cartFixedTesting.html">
					<button class="btn btn-outline-dark" id="rhb" type="submit">
						<i class="bi-cart-fill me-1"></i> Cart <span
							class="badge bg-dark text-white ms-1 rounded-pill">0</span>
					</button>
				</form>
			</div>
		</div>
	</nav>
	<!-- Header-->
	<div id="logo">
		<a href="MTmain.html"><img id="main" src="images/logoPP.png"
			alt="마켓트리 로고"></a>
	</div>
	<div class="hmenu">
		<div class="hflex-container">
			<div class="hflex-item hitl">
				<span id="hcategorimain">전체카테고리
					<ul id="hcategorimenu">
						<li>과일</li>
						<li>채소</li>
						<li>정육</li>
						<li>건강식품</li>
					</ul>
				</span>

			</div>
			<div class="hflex-item hitc" >
				<span id="wimg"></span>
				<span id="weather"></span> 
				<span id="city"></span>
			</div>
			<div class="hflex-item hitr">
				<a href="mypage.html"><span style="color: rgb(95, 0, 128);">My page</span></a>
			</div>
		</div>
	</div>

	<script type="text/javascript">
const wimg = document.getElementById("wimg");
// 나중에 innerHTML로 날씨 이미지를 추가해줄 예정
const weather = document.querySelector("#weather");
// 나중에 innerText로 날씨정보를 넣어줄 예정
const city = document.querySelector("#city");
// 나중에 innerText로 지역정보를 넣어줄 예정
const API_KEY = "85d1f996d059d570380d1cc4c1599be5";
// API의 키를 변수로 저장

function onGeoOk(position) {//위치정보를 확인하면 실행할 함수 매개변수로 현재위치 넣어줌
// position은 다양한 현재 위치의 정보를 담고 있음 : 위도, 경도, 고도, 현재시간 등
const lat = position.coords.latitude;
// 현재 위치 정보의 위도 저장
const lon = position.coords.longitude;
// 현재 위치 정보의 경도 저장
const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;
// 위도 경도 및 API 키를 입력하여 해당 URL을 변수로 지정해줌
// 위의 URL로 들어가보면 해당 위치의 모든 정보를 json 파일의 형태로 보여줌
  
	fetch(url) // url변수(URL)를 통해 fetch를 진행
	// 자바스크립트를 사용할 때 서버에 네트워크 요청을 보내고, 새로운 정보를 받아오는 역할을 하는 API를 사용함 
      .then((response) => response.json()) // 응답 객체를 자바 스크립트 객체로 변환
      .then((data) => { 
      	city.innerText = data.name;
      	// data.name 은 지역정보를 나타냄
      	// 지역정보를 받아와서 #city내부에 innerText 해줌
      	weather.innerText = `${data.main.temp}`+"°C";
      	// data.main.temp 는 기온정보를 나타냄
      	// 기온정보를 받아와서 #weather내부에 innerText 해줌
      	const icon = data.weather[0].icon;
      	// data.weather[0].icon 아이콘의 번호값을 나타냄
      	// 아이콘 번호를 상수에 담아줌
      	wimg.innerHTML = "<img style='width:40px; height:40px;' src='images/weather/"+icon+".png'>";
      	// innerHTML을 통해 img 태그를 추가해주는데 src속성의 파일명을 받아온 아이콘번호로 입력
      	// 해당 파일명을 가진 파일을 40 x 40 px로 설정까지 해줌
      });
  console.log(url);
  // 현재위치에 관련된 날씨정보가 담긴 정보의 url
}
function onGeoError() { // 위치 정보 확인 못할때 실행할 함수
	alert("Can't find you. No weather for you.");
}
navigator.geolocation.getCurrentPosition(onGeoOk, onGeoError);
// 현재 유저의 위치를 가져오는함수 navigator.geolocation.getCurrentPosition
// 유저의 위치를 완벽하게 가져오는것이 아니라 가장 빠르게 가져오는 방법이기 때문에
// 완벽한 위치를 찾는 것은 아니고 근처에서 위치를 참조할 수 있는 곳의 위치정보를 나타낸다
// 인자로는 위치를 가져왔을때 실행할 내용과, 위치를 가져오지 못했을 때 실행할 내용을 전달해준다.
// navigator : 브라우저 공급자 및 버전 정보 등을 포함한 브라우저에 대한 다양한 정보를 저장하는 객체
</script>
</body>
</html>